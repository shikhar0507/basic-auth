<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div>
    <h1>Login</h1>
    <input required placeholder="username" id="name" />
    <input required type="password" placeholder="password"  id="psswd"/>
    <button id="submit">Submit</button>
</div>
<div>Don't have an account ? <a href="./signup">Signup</a> </div>
<script>

    document.getElementById('submit').addEventListener('click',()=>{
        const body  = JSON.stringify({
            username : document.getElementById("name").value,
            psswd : document.getElementById("psswd").value
        })

        fetch("http://localhost:8080/login-user" ,{method:"POST",headers:{"Content-Type":"application/json"},body:body}).then(res=>{
            if(res.ok) {
                return res.json()
            }
           throw new Error(res.status)
        }).then((response)=>{
            window.location.href = './'
        }).catch(err=>{
           if (Number(err.message) == 404) {
                alert("Account does not exists! Redirecting")
               setTimeout(()=>{
                    window.location.href = './signup'
               },500)
           }
        })
    })
</script>
</body>
</html>